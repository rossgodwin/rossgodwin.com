<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><meta content='text/html; charset=utf-8' http-equiv='Content-Type'><meta http-equiv='X-UA-Compatible' content='IE=edge'><meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'><link rel="canonical" href="https://career.rossgodwin.com/articles/information-technology/apache-forward-requests-conditionally-to-wildfly/"><title>Ross Godwin - Career - Configure Apache to Forward some Url Reqests to Wildfly</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png"><link rel="manifest" href="/assets/images/favicon/site.webmanifest"><link rel="mask-icon" href="/assets/images/favicon/safari-pinned-tab.svg" color="#205ec9"><link rel="shortcut icon" href="/assets/images/favicon/favicon.ico"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/images/favicon/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/assets/css/style.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-X190CB39TW"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-X190CB39TW'); </script><body><div class="pf-page-wrapper"><header class="pf-page-header"><div class="pf-page-header-wrapper"><div class="pf-page-header-title"><h1 class="pf-heading-leading-vertical-bar"></h1><button class="pf-page-header-menu-toggler" type="button" aria-label="Toggle navigation"> <i class="fa fa-bars fa-2x" aria-hidden="true"></i> </button></div><nav class="pf-page-header-navigation"><ul><li class=""> <a href="/construction">Construction</a><li class=""> <a href="/information-technology">Information Technology</a><li class="active"> <a href="/articles">Articles</a><li class="pf-page-header-navigation-item-separator"> |<li> <a href="https://www.linkedin.com/in/ross-godwin" class="pf-icon-link" target="_blank"> <span class="fa-stack fa-1x"> <i class="fas fa-circle fa-stack-2x" aria-hidden="true"></i> <i class="fa-stack-1x fab fa-linkedin-in fa-inverse" aria-hidden="true"></i> </span> </a><li> <a href="https://www.github.com/rossgodwin" class="pf-icon-link" target="_blank"> <span class="fa-stack fa-1x"> <i class="fas fa-circle fa-stack-2x" aria-hidden="true"></i> <i class="fa-stack-1x fab fa-github fa-inverse" aria-hidden="true"></i> </span> </a></ul></nav></div></header><div class="pf-page-content"><section class="pf-page-content-main"><section class="pf-article"><header class="pf-article-header"><h2 class="pf-heading-leading-vertical-bar">Configure Apache to Forward some Url Reqests to Wildfly</h2><div class="pf-article-header-meta"> Published:&nbsp;Jan 3, 2018 <br> <span>Tags:&nbsp; <a href="/articles/tag/apache">apache</a>&nbsp; <a href="/articles/tag/httpd">httpd</a>&nbsp; <a href="/articles/tag/mod_proxy">mod_proxy</a>&nbsp; <a href="/articles/tag/wildfly">wildfly</a>&nbsp; </span><hr></div></header><div class="pf-article-body"><p>I created a website <i>CheapThyCable.com</i> that is composed of a static blog and a JavaEE application. Originally I developed it so that all content was served out by the application server whose content was comprised from a war file.</p><p><img src="/assets/images/article/apache-forward-requests-conditionally-to-wildfly/arrows-1738067_1280_350.jpg" alt="apache httpd mod_proxy wildfly" class="pf-image-responsive" /></p><p>When I originally built the project, I wanted everything to be contained in my war file, both dynamic content and static content. A couple of things I have since discovered I don’t like about this are 1) any blogs I add requires a war file deployment which is much slower than just doing a apache restart, 2) I didn’t like the effect this had on my version control. For me, it was difficult to determine when a good time to perform a tag on the source code should occur, since things were constantly changing with the blog.</p><p>So I decided that I wanted to separate the content of my website and particularly what served out that content. The site’s blog is generated by the static site generator Pelican and all this content I wanted to be served out by the Apache web server. All other content, namely the application, would be handle by my Wildfly application server. Below is a brief snippet from my httpd.conf file, showing how I forwarded certain application related url patterns to the application server.</p><p>A couple of quick notes. Under my htdocs folder, I created a subfolder <code class="highlighter-rouge">cheapthycable.com</code> containing the static content served out by Apache. My application server is listening on port 8080, so by specifying the port I can forward request on to the application server. Also notice the use of ProxyPassReverse. You may ask, “do I need the ProxyPassReverse”. The documentation recommends it.</p><div class="pf-quote"> The reverse proxy then decides where to send those requests and returns the content as if it were itself the origin. <svg class="svg-inline--fa fa-quote-left fa-w-16" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="quote-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M464 256h-80v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8c-88.4 0-160 71.6-160 160v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48zm-288 0H96v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8C71.6 32 0 103.6 0 192v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"></path></svg></div><p>and</p><div class="pf-quote"> Note that whether you use RewriteRule or ProxyPass, you'll still need to use the ProxyPassReverse directive to catch redirects issued from the back-end server: <svg class="svg-inline--fa fa-quote-left fa-w-16" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="quote-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M464 256h-80v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8c-88.4 0-160 71.6-160 160v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48zm-288 0H96v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8C71.6 32 0 103.6 0 192v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"></path></svg></div><p>I won’t include all the app related urls that need to be forwarded, but a couple are <code class="highlighter-rouge">/login</code> and <code class="highlighter-rouge">/app</code>.</p><noscript><pre>400: Invalid request</pre></noscript> <script src="https://gist.github.com/ea226d39d967d5d33d49fdd1ea9ba71b.js"> </script><p>This is a just a snippet of my base configuration, but should give you a basic idea.</p></div></section></section></div><footer class="pf-page-footer"><div class="pf-page-footer-wrapper"> Contact me: <a href="https://www.linkedin.com/in/ross-godwin">linkedin.com/ross-godwin</a> <br> &copy; <span id="year"></span></div></footer></div><script src="/assets/perfolio/lib/jquery-3.1.1/js/jquery.min.js"></script> <script> $(document).ready(function() { $(".pf-page-header-menu-toggler").click(function(e) { $(".pf-page-header-navigation").toggleClass("active"); }); $("#year").html(new Date().getFullYear()); }); </script>
