<script src="{{ 'assets/jkt-module-commons/lib/jquery-3.1.1/js/jquery.min.js' | relative_url }}"></script>

{% include jkt-module-commons/page/body/body-footer-scripts.html %}

{% assign body-footer-scripts = '' | split: '' %}

{% if page.simple-searches %}
	{% assign body-footer-scripts = body-footer-scripts | push: 'assets/jkt-site/lib/simple-jekyll-search/simple-jekyll-search.custom.js' %}
{% endif %}

{% assign body-footer-scripts = body-footer-scripts | push: 'assets/jkt-site/js/scripts.js' %}

{% assign body-footer-scripts = body-footer-scripts | uniq %}
{% for script in body-footer-scripts %}
	<script src="{{ script | relative_url }}" type="text/javascript"></script>
{% endfor %}

<script>
	$(document).ready(function() {
		$(".jkt-page-header-menu-toggler").click(function(e) {
			$(".jkt-page-header-navigation").toggleClass("active");
		});

		$("#year").html(new Date().getFullYear());
		
		{% if page.include-highlightjs %}
			document.querySelectorAll('pre code').forEach((block) => {
				hljs.highlightBlock(block);
			});
		{% endif %}

		{% include jkt-site/page/body/footer/simple-search-script.html %}
		
		{% if page.easy-pie-charts %}
			animatePieCharts(JSON.parse('{{ page.easy-pie-charts | flatten | jsonify }}'));
		{% endif %}

		var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
		if (window.location.hash && isChrome) {
			setTimeout(function () {
				var hash = window.location.hash;
				window.location.hash = "";
				window.location.hash = hash;
			}, 300);
		}
	});

	{% if page.easy-pie-charts %}
		$(window).scroll(function() {
			animatePieCharts(JSON.parse('{{ page.easy-pie-charts | flatten | jsonify }}'));
		});
	{% endif %}
</script>